"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7977],{3183:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"auto-docs/types/interfaces/IPluginLifecycle","title":"IPluginLifecycle","description":"Plugin Docs","source":"@site/docs/auto-docs/types/interfaces/IPluginLifecycle.md","sourceDirName":"auto-docs/types/interfaces","slug":"/auto-docs/types/interfaces/IPluginLifecycle","permalink":"/docs/auto-docs/types/interfaces/IPluginLifecycle","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa-plugin/edit/develop/docs/docs/auto-docs/types/interfaces/IPluginLifecycle.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"IPluginGraphQL","permalink":"/docs/auto-docs/types/interfaces/IPluginGraphQL"},"next":{"title":"IPluginPubSub","permalink":"/docs/auto-docs/types/interfaces/IPluginPubSub"}}');var r=i(6070),l=i(7648);const t={},o=void 0,d={},c=[{value:"Error Handling",id:"error-handling",level:2},{value:"Required vs Optional Hooks",id:"required-vs-optional-hooks",level:2},{value:"Idempotency Requirements",id:"idempotency-requirements",level:2},{value:"Example",id:"example",level:2},{value:"Type Parameters",id:"type-parameters",level:2},{value:"TDb",id:"tdb",level:3},{value:"TConfig",id:"tconfig",level:3},{value:"Properties",id:"properties",level:2},{value:"onActivate()?",id:"onactivate",level:3},{value:"Parameters",id:"parameters",level:4},{value:"context",id:"context",level:5},{value:"Returns",id:"returns",level:4},{value:"Remarks",id:"remarks",level:4},{value:"Throws",id:"throws",level:4},{value:"onDeactivate()?",id:"ondeactivate",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"context",id:"context-1",level:5},{value:"Returns",id:"returns-1",level:4},{value:"Remarks",id:"remarks-1",level:4},{value:"onInstall()?",id:"oninstall",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"context",id:"context-2",level:5},{value:"Returns",id:"returns-2",level:4},{value:"Remarks",id:"remarks-2",level:4},{value:"Throws",id:"throws-1",level:4},{value:"onLoad()?",id:"onload",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"context",id:"context-3",level:5},{value:"Returns",id:"returns-3",level:4},{value:"Throws",id:"throws-2",level:4},{value:"onUninstall()?",id:"onuninstall",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"context",id:"context-4",level:5},{value:"Returns",id:"returns-4",level:4},{value:"Remarks",id:"remarks-3",level:4},{value:"onUnload()?",id:"onunload",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"context",id:"context-5",level:5},{value:"Returns",id:"returns-5",level:4},{value:"onUpdate()?",id:"onupdate",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"fromVersion",id:"fromversion",level:5},{value:"toVersion",id:"toversion",level:5},{value:"context",id:"context-6",level:5},{value:"Returns",id:"returns-6",level:4},{value:"Remarks",id:"remarks-4",level:4},{value:"Throws",id:"throws-3",level:4},{value:"Example",id:"example-1",level:4}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/",children:"Plugin Docs"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"interface-ipluginlifecycletdb-tconfig",children:"Interface: IPluginLifecycle<TDb, TConfig>"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-plugin/tree/main/plugins/types.ts#L185",children:"plugins/types.ts:185"})]}),"\n",(0,r.jsx)(n.p,{children:"Plugin lifecycle interface"}),"\n",(0,r.jsx)(n.p,{children:"Defines the contract for plugin lifecycle hooks that must be implemented\nby all plugins to ensure proper initialization, activation, and cleanup.\nAll hooks receive a context object for accessing shared resources."}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"Lifecycle hooks are allowed to throw or return rejected Promises to signal failure.\nUse descriptive Error messages (or a custom PluginError class) so the host can\ndistinguish plugin errors from system errors."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Caller behavior on failure:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The host stops the current lifecycle step"}),"\n",(0,r.jsx)(n.li,{children:"The error bubbles up to the host application"}),"\n",(0,r.jsx)(n.li,{children:"The host may attempt rollback (call onDeactivate/onUninstall) or retry"}),"\n",(0,r.jsx)(n.li,{children:"Plugins should implement compensating/rollback logic where meaningful"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"required-vs-optional-hooks",children:"Required vs Optional Hooks"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Hook"}),(0,r.jsx)(n.th,{children:"Recommendation"}),(0,r.jsx)(n.th,{children:"Notes"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onActivate"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Recommended"})}),(0,r.jsx)(n.td,{children:"Primary hook for setup; always implement"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onDeactivate"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Recommended"})}),(0,r.jsx)(n.td,{children:"Cleanup resources; pair with onActivate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onInstall"})}),(0,r.jsx)(n.td,{children:"Optional"}),(0,r.jsx)(n.td,{children:"First-time setup; not called on every activation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onUninstall"})}),(0,r.jsx)(n.td,{children:"Optional"}),(0,r.jsx)(n.td,{children:"Data cleanup; ensure complete removal"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onUpdate"})}),(0,r.jsx)(n.td,{children:"Optional"}),(0,r.jsx)(n.td,{children:"Version migrations; only when schema changes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"onLoad"}),"/",(0,r.jsx)(n.code,{children:"onUnload"})]}),(0,r.jsx)(n.td,{children:"Rarely needed"}),(0,r.jsx)(n.td,{children:"Low-level memory management"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," ",(0,r.jsx)(n.code,{children:"onActivate"})," may be invoked without a prior ",(0,r.jsx)(n.code,{children:"onInstall"})," call if the\nplugin was pre-installed or the system is restoring state. Guard accordingly."]}),"\n",(0,r.jsx)(n.h2,{id:"idempotency-requirements",children:"Idempotency Requirements"}),"\n",(0,r.jsx)(n.p,{children:"All hooks MUST be safe to run multiple times (idempotent):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"onInstall"}),": Check if already installed before creating resources"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"onActivate"}),": Check ",(0,r.jsx)(n.code,{children:"context.isActive"})," to prevent double-activation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"onDeactivate"}),": Safe to call even if already deactivated"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"onUninstall"}),": Safe to call even if resources don't exist"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const MyPlugin: IPluginLifecycle = {\n  onActivate: async (context) => {\n    if (context.isActive) {\n      context.logger.warn('Plugin already active, skipping activation');\n      return;\n    }\n    // Perform activation...\n  },\n  onDeactivate: async (context) => {\n    // Cleanup resources...\n  },\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,r.jsx)(n.h3,{id:"tdb",children:"TDb"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"TDb"})," = ",(0,r.jsx)(n.code,{children:"unknown"})]}),"\n",(0,r.jsx)(n.p,{children:"Type for the database connection"}),"\n",(0,r.jsx)(n.h3,{id:"tconfig",children:"TConfig"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"TConfig"})," = ",(0,r.jsx)(n.a,{href:"/docs/auto-docs/types/type-aliases/PluginConfig",children:(0,r.jsx)(n.code,{children:"PluginConfig"})})]}),"\n",(0,r.jsx)(n.p,{children:"Type for plugin configuration"}),"\n",(0,r.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(n.h3,{id:"onactivate",children:"onActivate()?"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"optional"})," ",(0,r.jsx)(n.strong,{children:"onActivate"}),": (",(0,r.jsx)(n.code,{children:"context"}),") => ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-plugin/tree/main/plugins/types.ts#L211",children:"plugins/types.ts:211"})]}),"\n",(0,r.jsx)(n.p,{children:"Called when plugin is activated"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Primary setup hook"})," - Use for validation, SDK initialization, and resource setup.\nThis is the most commonly implemented hook."]}),"\n",(0,r.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"context",children:"context"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/auto-docs/types/interfaces/IPluginContext",children:(0,r.jsx)(n.code,{children:"IPluginContext"})}),"<",(0,r.jsx)(n.code,{children:"TDb"}),", ",(0,r.jsx)(n.code,{children:"TConfig"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"Plugin context with db, logger, and config"}),"\n",(0,r.jsx)(n.h4,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"remarks",children:"Remarks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Check ",(0,r.jsx)(n.code,{children:"context.isActive"})," for idempotency"]}),"\n",(0,r.jsx)(n.li,{children:"May be called without prior onInstall (e.g., system restore)"}),"\n",(0,r.jsx)(n.li,{children:"If activation fails, throw an Error; host may call onDeactivate for cleanup"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"throws",children:"Throws"}),"\n",(0,r.jsx)(n.p,{children:"Error if activation fails; message should be user-friendly"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"ondeactivate",children:"onDeactivate()?"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"optional"})," ",(0,r.jsx)(n.strong,{children:"onDeactivate"}),": (",(0,r.jsx)(n.code,{children:"context"}),") => ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-plugin/tree/main/plugins/types.ts#L226",children:"plugins/types.ts:226"})]}),"\n",(0,r.jsx)(n.p,{children:"Called when plugin is deactivated"}),"\n",(0,r.jsx)(n.p,{children:"Use for cleanup, canceling in-flight operations, and releasing resources.\nShould be safe to call multiple times (idempotent)."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"context-1",children:"context"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/auto-docs/types/interfaces/IPluginContext",children:(0,r.jsx)(n.code,{children:"IPluginContext"})}),"<",(0,r.jsx)(n.code,{children:"TDb"}),", ",(0,r.jsx)(n.code,{children:"TConfig"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"Plugin context with db, logger, and config"}),"\n",(0,r.jsx)(n.h4,{id:"returns-1",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"remarks-1",children:"Remarks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Called when user disables plugin or before uninstall"}),"\n",(0,r.jsx)(n.li,{children:"May be called as rollback if onActivate fails"}),"\n",(0,r.jsx)(n.li,{children:"Should not throw; log errors and continue cleanup"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"oninstall",children:"onInstall()?"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"optional"})," ",(0,r.jsx)(n.strong,{children:"onInstall"}),": (",(0,r.jsx)(n.code,{children:"context"}),") => ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-plugin/tree/main/plugins/types.ts#L251",children:"plugins/types.ts:251"})]}),"\n",(0,r.jsx)(n.p,{children:"Called when plugin is first installed"}),"\n",(0,r.jsx)(n.p,{children:"Use for creating default configuration, database records, and registering\nwebhooks. Only called once per installation (not on every activation)."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"context-2",children:"context"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/auto-docs/types/interfaces/IPluginContext",children:(0,r.jsx)(n.code,{children:"IPluginContext"})}),"<",(0,r.jsx)(n.code,{children:"TDb"}),", ",(0,r.jsx)(n.code,{children:"TConfig"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"Plugin context with db and logger"}),"\n",(0,r.jsx)(n.h4,{id:"returns-2",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"remarks-2",children:"Remarks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"context.config"})," may be undefined (set defaults here)"]}),"\n",(0,r.jsx)(n.li,{children:"Must be idempotent: check if already installed before creating resources"}),"\n",(0,r.jsx)(n.li,{children:"If installation fails, throw Error; host will not proceed"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"throws-1",children:"Throws"}),"\n",(0,r.jsx)(n.p,{children:"Error if installation fails; message should describe what went wrong"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"onload",children:"onLoad()?"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"optional"})," ",(0,r.jsx)(n.strong,{children:"onLoad"}),": (",(0,r.jsx)(n.code,{children:"context"}),") => ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-plugin/tree/main/plugins/types.ts#L195",children:"plugins/types.ts:195"})]}),"\n",(0,r.jsx)(n.p,{children:"Called when plugin is loaded into memory"}),"\n",(0,r.jsx)(n.p,{children:"Use for initial setup and resource allocation that must happen before\nany other hooks. Rarely needed; prefer onActivate for most setup."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"context-3",children:"context"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/auto-docs/types/interfaces/IPluginContext",children:(0,r.jsx)(n.code,{children:"IPluginContext"})}),"<",(0,r.jsx)(n.code,{children:"TDb"}),", ",(0,r.jsx)(n.code,{children:"TConfig"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"Plugin context (db may not be available yet)"}),"\n",(0,r.jsx)(n.h4,{id:"returns-3",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"throws-2",children:"Throws"}),"\n",(0,r.jsx)(n.p,{children:"Error if loading fails; host will not proceed with activation"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"onuninstall",children:"onUninstall()?"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"optional"})," ",(0,r.jsx)(n.strong,{children:"onUninstall"}),": (",(0,r.jsx)(n.code,{children:"context"}),") => ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-plugin/tree/main/plugins/types.ts#L265",children:"plugins/types.ts:265"})]}),"\n",(0,r.jsx)(n.p,{children:"Called when plugin is uninstalled"}),"\n",(0,r.jsx)(n.p,{children:"Use for removing configuration, cleaning up data, and unregistering webhooks.\nShould completely remove plugin presence from the system."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"context-4",children:"context"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/auto-docs/types/interfaces/IPluginContext",children:(0,r.jsx)(n.code,{children:"IPluginContext"})}),"<",(0,r.jsx)(n.code,{children:"TDb"}),", ",(0,r.jsx)(n.code,{children:"TConfig"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"Plugin context with db, logger, and config"}),"\n",(0,r.jsx)(n.h4,{id:"returns-4",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"remarks-3",children:"Remarks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Must be idempotent: safe to call even if resources don't exist"}),"\n",(0,r.jsx)(n.li,{children:"Should not throw; log errors and continue cleanup"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"onunload",children:"onUnload()?"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"optional"})," ",(0,r.jsx)(n.strong,{children:"onUnload"}),": (",(0,r.jsx)(n.code,{children:"context"}),") => ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-plugin/tree/main/plugins/types.ts#L235",children:"plugins/types.ts:235"})]}),"\n",(0,r.jsx)(n.p,{children:"Called when plugin is unloaded from memory"}),"\n",(0,r.jsx)(n.p,{children:"Use for final cleanup and resource release. Rarely needed."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"context-5",children:"context"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/auto-docs/types/interfaces/IPluginContext",children:(0,r.jsx)(n.code,{children:"IPluginContext"})}),"<",(0,r.jsx)(n.code,{children:"TDb"}),", ",(0,r.jsx)(n.code,{children:"TConfig"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"Plugin context (some resources may already be unavailable)"}),"\n",(0,r.jsx)(n.h4,{id:"returns-5",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"onupdate",children:"onUpdate()?"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"optional"})," ",(0,r.jsx)(n.strong,{children:"onUpdate"}),": (",(0,r.jsx)(n.code,{children:"fromVersion"}),", ",(0,r.jsx)(n.code,{children:"toVersion"}),", ",(0,r.jsx)(n.code,{children:"context"}),") => ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/PalisadoesFoundation/talawa-plugin/tree/main/plugins/types.ts#L293",children:"plugins/types.ts:293"})]}),"\n",(0,r.jsx)(n.p,{children:"Called when plugin is updated from one version to another"}),"\n",(0,r.jsx)(n.p,{children:"Use for database migrations, configuration transformations, and data\nformat updates between versions."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"fromversion",children:"fromVersion"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"Previous plugin version (semver string)"}),"\n",(0,r.jsx)(n.h5,{id:"toversion",children:"toVersion"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"New plugin version (semver string)"}),"\n",(0,r.jsx)(n.h5,{id:"context-6",children:"context"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/auto-docs/types/interfaces/IPluginContext",children:(0,r.jsx)(n.code,{children:"IPluginContext"})}),"<",(0,r.jsx)(n.code,{children:"TDb"}),", ",(0,r.jsx)(n.code,{children:"TConfig"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"Plugin context with db, logger, and config"}),"\n",(0,r.jsx)(n.h4,{id:"returns-6",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"remarks-4",children:"Remarks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Compare fromVersion and toVersion to determine needed migrations"}),"\n",(0,r.jsx)(n.li,{children:"Must be idempotent: safe to run the same migration multiple times"}),"\n",(0,r.jsx)(n.li,{children:"If migration fails, throw Error; host may attempt rollback"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"throws-3",children:"Throws"}),"\n",(0,r.jsx)(n.p,{children:"Error if migration fails; host may rollback to previous version"}),"\n",(0,r.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"onUpdate: async (fromVersion, toVersion, context) => {\n  if (semver.lt(fromVersion, '2.0.0') && semver.gte(toVersion, '2.0.0')) {\n    // Migrate database schema from v1 to v2\n    await migrateToV2(context.db);\n  }\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},7648:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var s=i(758);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6346],{4627:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"docs/developer-resources/testing/platform-tests","title":"Platform Tests","description":"Platform tests validate the core plugin infrastructure and tooling.","source":"@site/docs/docs/developer-resources/testing/platform-tests.md","sourceDirName":"docs/developer-resources/testing","slug":"/developer-resources/testing/platform-tests","permalink":"/docs/developer-resources/testing/platform-tests","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa-plugin/edit/develop/docs/docs/docs/developer-resources/testing/platform-tests.md","tags":[],"version":"current","sidebarPosition":18,"frontMatter":{"id":"platform-tests","title":"Platform Tests","slug":"/developer-resources/testing/platform-tests","sidebar_position":18},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/docs/developer-resources/testing/getting-started"},"next":{"title":"Shared Utilities","permalink":"/docs/developer-resources/testing/shared-utilities"}}');var i=s(6070),r=s(7648);const l={id:"platform-tests",title:"Platform Tests",slug:"/developer-resources/testing/platform-tests",sidebar_position:18},a=void 0,d={},o=[{value:"Test Location",id:"test-location",level:2},{value:"Running Platform Tests",id:"running-platform-tests",level:2},{value:"Manifest Validation Tests",id:"manifest-validation-tests",level:2},{value:"What&#39;s Tested",id:"whats-tested",level:3},{value:"Example Test",id:"example-test",level:3},{value:"Generator Tests",id:"generator-tests",level:2},{value:"What&#39;s Tested",id:"whats-tested-1",level:3},{value:"Example Test Structure",id:"example-test-structure",level:3},{value:"Packaging Tests",id:"packaging-tests",level:2},{value:"What&#39;s Tested",id:"whats-tested-2",level:3},{value:"Key Testing Patterns",id:"key-testing-patterns",level:3},{value:"Coverage Standards",id:"coverage-standards",level:2},{value:"Adding New Platform Tests",id:"adding-new-platform-tests",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Platform tests validate the core plugin infrastructure and tooling."}),"\n",(0,i.jsx)(t.h2,{id:"test-location",children:"Test Location"}),"\n",(0,i.jsxs)(t.p,{children:["All platform tests are in ",(0,i.jsx)(t.code,{children:"test/platform/"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"test/platform/\n\u251c\u2500\u2500 manifestValidation.test.ts  # Manifest schema validation\n\u251c\u2500\u2500 generator.test.ts           # Plugin scaffolding tests\n\u2514\u2500\u2500 packaging.test.ts           # Packaging & zip creation tests\n"})}),"\n",(0,i.jsx)(t.h2,{id:"running-platform-tests",children:"Running Platform Tests"}),"\n",(0,i.jsx)(t.p,{children:"Platform tests can be run individually or as a suite. Use the commands below to execute tests and verify that all platform infrastructure is working correctly."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# Run all platform tests\npnpm test test/platform\n\n# Run specific platform test\npnpm test test/platform/manifestValidation.test.ts\n"})}),"\n",(0,i.jsx)(t.h2,{id:"manifest-validation-tests",children:"Manifest Validation Tests"}),"\n",(0,i.jsxs)(t.p,{children:["Tests in ",(0,i.jsx)(t.code,{children:"manifestValidation.test.ts"})," validate plugin manifest files."]}),"\n",(0,i.jsx)(t.h3,{id:"whats-tested",children:"What's Tested"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Core Schema"}),": Required fields (name, pluginId, version, description, author)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Format Validation"}),": pluginId format, semantic versioning"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Extension Points"}),": Structure and types of extension points"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Real Manifests"}),": Validates actual plugin manifests (Razorpay, Plugin Map)"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"example-test",children:"Example Test"}),"\n",(0,i.jsx)(t.p,{children:"These tests verify that plugin manifest files conform to the required schema. They read actual manifest files from existing plugins and validate field types, required properties, and format constraints."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"it('should validate Razorpay admin manifest', () => {\n  const manifest = JSON.parse(readFileSync(manifestPath, 'utf-8'));\n  \n  const result = validateManifest(manifest);\n  expect(result.valid).toBe(true);\n  expect(result.errors).toHaveLength(0);\n});\n"})}),"\n",(0,i.jsx)(t.h2,{id:"generator-tests",children:"Generator Tests"}),"\n",(0,i.jsxs)(t.p,{children:["Tests in ",(0,i.jsx)(t.code,{children:"generator.test.ts"})," validate plugin scaffolding creation."]}),"\n",(0,i.jsx)(t.h3,{id:"whats-tested-1",children:"What's Tested"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Admin module creation"}),": Verifies all admin plugin files are created"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"API module creation"}),": Verifies all API plugin files are created"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"File structure"}),": Checks nested directories and files"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Input Validation"}),": Verifies plugin name validation"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Error Handling"}),": Verifies filesystem error handling"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Cleanup"}),": Ensures temporary directories are removed"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"example-test-structure",children:"Example Test Structure"}),"\n",(0,i.jsxs)(t.p,{children:["Platform tests follow a consistent pattern using Vitest's ",(0,i.jsx)(t.code,{children:"beforeEach"})," and ",(0,i.jsx)(t.code,{children:"afterEach"})," hooks to set up isolated test environments. Each test creates its own temporary directory to avoid interference between tests."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"it('should create admin module structure', () => {\n  const tempDir = mkdtempSync(join(tmpdir(), 'plugin-test-'));\n  \n  try {\n    createAdminSkeleton('TestPlugin', tempDir);\n    \n    expect(existsSync(join(tempDir, 'TestPlugin/admin/index.tsx'))).toBe(true);\n    expect(existsSync(join(tempDir, 'TestPlugin/admin/manifest.json'))).toBe(true);\n  } finally {\n    rmSync(tempDir, { recursive: true, force: true });\n  }\n});\n"})}),"\n",(0,i.jsx)(t.h2,{id:"packaging-tests",children:"Packaging Tests"}),"\n",(0,i.jsxs)(t.p,{children:["Tests in ",(0,i.jsx)(t.code,{children:"packaging.test.ts"})," validate plugin packaging and zip creation."]}),"\n",(0,i.jsx)(t.h3,{id:"whats-tested-2",children:"What's Tested"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Development builds"}),": Creates and validates dev zips"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Production builds"}),": Creates and validates prod zips"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Manifest inclusion"}),": Verifies manifests are in zip"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Zip integrity"}),": Tests zip file validity and structure"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"File filtering"}),": Ensures junk files are excluded"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"key-testing-patterns",children:"Key Testing Patterns"}),"\n",(0,i.jsxs)(t.p,{children:["Packaging tests ensure that plugins are correctly bundled into distributable zip files. They verify file inclusion, exclusion rules (e.g., ignoring ",(0,i.jsx)(t.code,{children:".DS_Store"}),"), zip integrity, and proper directory structure preservation."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-typescript",children:"it('should create development build zip', () => {\n  const zipPath = join(tempTestDir, 'test-plugin-dev.zip');\n  createZip('test-plugin', tempTestDir, { production: false });\n  \n  expect(existsSync(zipPath)).toBe(true);\n  expect(statSync(zipPath).size).toBeGreaterThan(0);\n});\n"})}),"\n",(0,i.jsx)(t.h2,{id:"coverage-standards",children:"Coverage Standards"}),"\n",(0,i.jsxs)(t.p,{children:["Platform tests should maintain ",(0,i.jsx)(t.strong,{children:"80%+ coverage"})," as they form the foundation for all plugin testing."]}),"\n",(0,i.jsxs)(t.p,{children:["Current stats: Run ",(0,i.jsx)(t.code,{children:"pnpm test:coverage test/platform"})," to see latest coverage."]}),"\n",(0,i.jsx)(t.h2,{id:"adding-new-platform-tests",children:"Adding New Platform Tests"}),"\n",(0,i.jsx)(t.p,{children:"When adding platform functionality:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Create test file in ",(0,i.jsx)(t.code,{children:"test/platform/"})]}),"\n",(0,i.jsxs)(t.li,{children:["Follow naming convention: ",(0,i.jsx)(t.code,{children:"[feature].test.ts"})]}),"\n",(0,i.jsx)(t.li,{children:"Test both success and failure cases"}),"\n",(0,i.jsx)(t.li,{children:"Clean up temporary files/directories"}),"\n",(0,i.jsx)(t.li,{children:"Update this documentation"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Read ",(0,i.jsx)(t.a,{href:"setup",children:"Setup Guide"})," for test configuration details"]}),"\n",(0,i.jsxs)(t.li,{children:["Read ",(0,i.jsx)(t.a,{href:"getting-started",children:"Getting Started"})," for basic test patterns"]}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},7648:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>a});var n=s(758);const i={},r=n.createContext(i);function l(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);